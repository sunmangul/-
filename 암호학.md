# <p align="center">🔐암호학 개요</p>
## 🔒 암호학
### ☑ 암호학
- 평문을 타인이 알아볼 수 없게 암호문으로 만들고 특정 키를 가진 사람만이 복원가능하게 하는 **암호 기술**과 이를 제3자가 해독하는 방법을 분석하는 **암호해독**에 관하여 연구하는 학문
## 🔓 암호학의 기본 정의
### ✅ 기본개념
#### 1) 사용하는 이름
**Alice** and **Bob** : 송수신자<br/>
**Eve**(eavesdropper) : 소극적인 공격자| 도청만<br/>
**Mallory** : 악의를 가진 공격자 | 메세지 수정, 대체 메세지 송신 가능<br/>
**Trent** : 중재자 | 중립적 위치의 제3자<br/>
**Victor**(verifier) : 의도된 거래와 통신이 실제로 발생했는지 검증

#### 2) 송신자, 수신자, 도청자
송신자 : 정보를 전달하는 사람<br/>
수신자 : 정보를 전달받는 사람<br/>
메세지 : 송신된 정보를 총칭하는 말<br/>
도청자 : 사람이 아닌 기계일 수도 있고, 프로그램일 수 있다.

#### 3) 암호화, 복호화
암호화 : 평문을 다른 사람이 알아보지 못하게 암호문으로 바꾸는 과정<br/>
복호화 : 암호문의 내용을 보기 위하여 평문으로 바꾸는 과정<br/>
평문(plaintext) : 암호화 전 메세지<br/>
암호문(ciphertext) : 암호화 후 메세지<br/><br/>
키 : 데이터를 암호화 및 복호화 하는 알고리즘에 사용되는 핵심 값<br/>
키 스페이스(key) : 암호화 알고리즘에서 사용하는 키값의 크기<br/>
※Alice와 Bob은 암호라는 기술을 통해 **기밀성**을 유지한다.

▶ 신뢰할 수 있는 암호시스템의 특성
- 정통 수학에 기초를 둔다.
- 유능한 전문가가 분석하여 안전하다고 판정
- 테스트 기간을 충분히 거침
- 
#### 4) 암호화와 복호화의 기호적 표현
단어 | 평문 | 암호문 | 키
:---: | :---: | :---: | :---:
기호 | M or P | C | K
<img src="https://i.imgur.com/jSGQDFQ.jpg">
평문(P)을 키(K)로 암호화(E)하여 암호문(C)을 얻음<br/>
<img src="https://i.imgur.com/4fg8aAb.jpg">
암호문(C)을 키(K)로 복호화(D)하여 평문(P)을 얻음<br/>

#### 5) 암호화 알고리즘과 키의 분리
- 키는 암호화 알고리즘에서 변경 가능한 부분이다.
- 암호화마다 새로운 알고리즘을 만들지 않아도 된다.

▶ **암호 알고리즘과 키를 분리하여 암호문이 반복되면 위험한 상황을 없애면서 알고리즘 재사용**<br/>
ex) 같은 브랜드의 자물쇠, 다른 열쇠

#### 6) 암호와 보안 상식
- 비밀 암호 알고리즘을 사용하지 말 것
  - 독자적인 암호 알고리즘을 비밀로하면 안전하다는 생각은 논리적인 문제가 있다.
  - 암호 알고리즘의 구조가 폭로되면 그걸로 끝이다.
  - 숨기는 것에 의한 보안은 위험하고 어리석다.
- 약한 암호는 암호화하지 않는 것보다 위험
  - 사용자가 잘못된 안심을해 기밀성 높은 정보를 소홀히 취급할 가능성이 있다.
- 어떤 암호라도 언젠가는 해독
  - 해독에 들어가는 시간이 해독해서 얻는 평문의 가치와 밸런스 있어야한다.
- 암호화는 보안의 아주 작은 부분
  - 최근은 사회공학 공격이 자주 행해진다.
  - 피싱, 트로이목마, 키로거도 사회공학 공격방법이다.
  - 가장 약한 링크는 사람이다.

▶ **암호화, 복호화가 쉽고 빠르지만 해독이 어려운 시스템일수록 좋은 암호 방식!**

## 📝 암호화 기법의 종류
### ✅ 암호화 방식에 따른 분류
- 치환
  - 비트, 문자, 블록을 다른 비트, 문자, 블록으로 대체
  - 평문과 암호문의 문자의 집합이 서로 다름
  - 일대응 대응이 아니어도 상관없다.
  - ex) abc -> sxz

<p algin="center">
<img width="45%" src="https://imgur.com/TvsRU79.png">
<img width="45%" src="https://imgur.com/KvtVB9S.png">
<p/>

- 전치
  - 비트, 문자, 블록의 순서를 재배열해 원래 의미를 감춤
  - 평문과 암호문의 문자의 집합이 동일
  - 평문과 암호문에 사용된 문자가 일대일 대응
  - ex) apple -> plape

<img src="https://i.imgur.com/sBHkgYd.png">

### ✅ 암호화 단위에 따른 분류
- 블록 암호
  - 블록(특정 비트 수의 집합)을 한 번에 처리하는 암호 알고리즘
  - 블록의 크기는 8bit(ASCII), 16bit(Unicode)에 비례
  - Round를 반복적으로 사용하여 암호화 강도를 높임
- 스트림 암호
  - 1bit, 1byte의 데이터 흐름을 순차적으로 처리하는 암호 알고리즘
  - 데이터의 흐름을 순차적으로 처리하기 때문에 내부상태를 가짐
  - 군사 및 외교용으로 사용, 통신 환경에서 구현이 용이
  
▶ **블록 암호는 평문의 길이를 블록 길이의 배수로 맞추기 위해 패딩을 추가**

구분 | 스트림 암호 | 블록 암호
--- | --- | ---
장점 | 암호화 빠름, 에러 전파 없음 | 높은 확산, 해시함수 등 다양
단점 | 낮은 확산 | 느린 암호화, 에러 전달
사례 | **LFSR**, MUX, generator | **DES**, IDEA, SEED, RC5, **AES**
단위 | Bit or Byte | Block
대상 | 음성, 오디오/비디오 스트리밍 | 일반 데이터, 스토리지 저장

### ✅ 암호화 위치에 따른 분류
- 링크 암호화
  - 모든 정보 암호화
  - 라우터, 중간 장비가 패킷의 다음 위치를 알기 위해 각 홉에서 해독
  - 라우터가 패킷의 헤더를 해독, 라우팅, 주소 정보를 읽고 재암호화
  - 데이터 링크, 물리적 계층에서 일어남

※ 홉은 패킷이 **목적지에 도달할 수 있도록 돕는 장비**로 패킷이 발신 및 수신 컴퓨터 사이에 많은 홉을 거친다.

- 종단간 암호화
  - 헤더와 트레일러를 제외하고 암호화
  - 필요한 라우팅 정보만 읽고 패킷을 진행 방향으로 통과
  - 근원지 컴퓨터의 사용자에 의해 시작(보다 나은 유연성 제공)
  - 애플리케이션 계층에서 일어남

구분 | 링크 암호화 | 종단간 암호화
--- | --- | ---
특징 | ISP나 통신업자가 암호화 | 사용자가 암호화
'' | 모든 데이터 암호화 | 헤더는 암호화 하지 않음
'' | 유저가 알고리즘 통제 불가 | 사용자가 알고리즘 통제
장점 | 운영 간단 | 높은 수준의 보안 서비스
'' | 트래픽분석을 어렵게 함 | 중간 노드에서 암호화 된 데이터
'' | 온라인으로 암호화
단점 | 중간 노드에서 평문 | 트래픽분석이 취약
'' | 다양한 보안 서비스에 한계 | 오프라인으로 암호화
'' | 규모가 커지면 비용과다

### ✅ 하드웨어/소프트웨어에 따른 분류
- 하드웨어 암호시스템
  - 컴퓨터와 통신기기의 내부버스와 외부 인터페이스에<br/>전용 암호처리용 하드웨어 설치
  - CPU에 부담을 주지않고 빠른 속도로 암호화하여 보안성 확보
- 소프트웨어 암호시스템
  - 암호처리용 소프트웨어를 사용한 데이터 암호화
  - 저렴한 비용으로 허용범위 내에서 적당한 안정성과 처리속도
  - 최근에는 소프트웨어에 의한 암호화를 해도 처리속도에 문제 없음

## 📜 주요 암호기술에 대한 개괄
### ✅ 대칭키, 비대칭키 암호
- 대칭키 : 암호화와 복호화에 사용하는 키가 동일한 암호 알고리즘
- 비대칭키 : 암호화와 복호화에 사용하는 키가 서로 다른 암호 알고리즘

▶ **수신자가 공개키를 뿌리면 송신자가 공개키로 암호화하고 암호문을 수신자의 개인키로 복호화**

### §하이브리드 암호 시스템§
- 대칭키 암호와 비대칭키 암호를 조합한 암호 방식이다.
  - **암호화**<br/>
    난수 생성기로 생성된 세션키를 가지고 평문을 대칭 키 알고리즘으로 암호화하고 세션키를 공개키로 암호화, 암호문과 세션 키를 송신
  - **복호화**<br/>
    세션키와 암호문을 분리하고 자신의 비밀키로 세션키를 복호화하고 복호화한 세션키로 암호문 복호화

### ✅ 일방향 해시함수
- 해시값은 일방향 해시함수를 사용하여 계산
- 문서의 기밀성이아니라 무결성(완전성)을 위함 + 인증

### ✅ 메세지 인증코드, 전자서명
#### 메세지 인증코드
- 생각했던 통신 상대인지 확인하기 위해 사용
- 무결성과 인증을 제공

#### 전자서명
- 오프라인에서의 도장, 서명의 개념
- 거짓행세(스푸핑), 변경, 부인이라는 위협을 방지
- 무결성을 확인하고 인증과 부인방지를 위함

### ✅ 의사난수 생성기
- 난수 : 어떤 유한개수로 조립된 수의 주기성 없는 계열
- 의사 난수 : 난수가 아니지만 사용상 난수로 간주해도 지장이 없는 난수

※ 컴퓨터에 산술난수를 발생시키면 커다란 주기를 가지지만 사용에 문제가 없음

## 🔎 암호분석(해독)
### ☑ 암호분석 개요
>- 암호 방식의 정규 참여자가 아닌 제3자가 암호문으로부터 평문을 찾으려는 시도를 말함
>- 해독에 참여하는 사람을 제3자, 침해자라고 표현

>- 키를 가지고 있지 않기 때문에 암호해독에 어려움
>- 평문의 통계적 성질과 암호에 관한 지식, 도구, 여러가지 정보를 이용하여 평문, 키를 찾아냄
>- 암호 해독자는 암호 방식을 알고 있다는 전제에서 암호해독을 시도(케르히호프의 원리)
### ✅ 암호분석의 종류
#### 암호문 단독 공격
- Eve가 어떤 암호문으르 얻어서 대응되는 평문과 키를 찾는 것
- Eve는 알고리즘을 알고 있고, 암호문을 가로챌 수 있는 상황
- 통계적 성질과 문장의 특성을 추정하여 해독
- 공격자가 암호문을 얻어도 복호화를 막아야 하기 때문에 이런류의 공격에 안전해야함

#### 기지 평문 공격(알려진 평문 공격)
- Eve는 여러 개의 평문/암호문 쌍을 미리 얻고 시작
- 비밀 메세지가 시간이 지나 공개되면 불리하게 작용

※ 메세지는 보통 **동일한 유형으로 시작**하고 **동일한 유형으로 끝**난다.<br/>
제2차 세계대전에서 특정한 맺음말과 이름, 연락처, 인사말등 각 메세지에서 **동일한 데이터**를 가지고 암호화 된 메세지를 포착하고 풀었다. 어느정도의 퍼즐조각이 풀리면 나머지는 **역공학**, **빈도분석**, **무차별 대입 공격** 등을 통해 평문과 키를 추정해 암호문을 해독했다.

#### 선택 평문 공격
- 알려진 평문 공격과 유사하지만 공격자에게 주어지는 평문/암호화쌍을 선택 할 수 있다.
- Eve가 Alice의 컴퓨터(암호기, 암호장치)에 접속할 수 있다고 가정
- Eve가 평문을 선택하면 그에 대응되는 암호문을 얻음(원하는만큼 가능)

#### 선택 암호문 공격
- Eve가 Bob의 컴퓨터(암호 복호기)에 접속할 수 있다고 가정
- Decryption Oracle : 선택된 암호문을 복호화할 수 있는 능력을 작추고 있는 기계
- 선택 암호문 공견에 견딜 수 있는 암호 알고리즘은 강한 알고리즘이라고 말할 수 있음

▶ 사설키가 알려지면 같은 종류의 메세지는 모두 복호화 가능

선택 평문 공격과 선택 암호문 공격은 키를 얻는 것이 목적

#### 고무호스 암호분석
- 암호분석가가 키를 얻을 때까지 키를 가진 사람을 공갈, 협박, 고문하여 키를 획득하는 방법
- 위험을 동반하지만 가장 강력하고 성공률이 높은 공격

#### §임시파일§
대부분의 암호화 시스템은 계산과정에서 임시파일을 사용한다. 파일이 삭제되거나 덮어 쓰여지지 않는다면 그 파일의 정보에 의해서 암호가 깨질 수 있다.

▶ **암호문 단독공격** < **기지 평분 공격** < **선택 평문 공격** 순서로 공격자의 능력이 향상<br/>
높은 단계의 공격자에게 안전한 암호 방식을 설계하는 것이 일반적

## 
